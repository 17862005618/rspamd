# Lua support makefile
SET(RCLSRC			  rcl_util.c
					  rcl_parser.c
					  rcl_emitter.c)

ADD_LIBRARY(rspamd-rcl ${LINK_TYPE} ${RCLSRC})
SET_TARGET_PROPERTIES(rspamd-rcl PROPERTIES VERSION ${RSPAMD_VERSION})
SET_TARGET_PROPERTIES(rspamd-rcl PROPERTIES COMPILE_FLAGS "-DRSPAMD_LIB")
IF(HAVE_FETCH_H)
	TARGET_LINK_LIBRARIES(rspamd-rcl fetch)
ELSE(HAVE_FETCH_H)
	IF(CURL_FOUND)
		TARGET_LINK_LIBRARIES(rspamd-rcl ${CURL_LIBRARIES})
	ENDIF(CURL_FOUND)
ENDIF(HAVE_FETCH_H)
IF(NO_SHARED MATCHES "OFF")
	INSTALL(TARGETS rspamd-rcl 
    	LIBRARY DESTINATION ${LIBDIR} 
    	PUBLIC_HEADER DESTINATION ${INCLUDEDIR})
ENDIF(NO_SHARED MATCHES "OFF")