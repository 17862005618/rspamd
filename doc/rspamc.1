.\" Automatically generated by Pod::Man 2.25 (Pod::Simple 3.16)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "rspamc 1"
.TH rspamc 1 "2012-10-02" "rspamd-0.5.2" "Rspamd documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.Sh NAME
.Nm rspamc
.IX Header "RSPAMC"
rspamc \- a simple client for rspamd spam filtering system
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
rspamc [\fB\-h\fR \fIhost[:port]\fR] [\fB\-p\fR] [\fB\-v\fR] [\fB\-b\fR \fIbind_address\fR] [\fB\-u\fR \fIuser\fR]
[\fB\-F\fR \fIfrom\fR] [\fB\-r\fR \fIrcpt\fR] [\fB\-d\fR \fIdeliver-to\fR]
[\fB\-i\fR \fIip\fR] [\fB\-c\fR \fIclassifier\fR] [\fB\-w\fR \fIweight\fR]
[\fB\-P\fR \fIpassword\fR] [\fB\-f\fR \fIflag\fR] [\fB\-t\fR \fItimeout\fR] [command] [file [file ...]]
.PP
rspamc [\fB\-\-help\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBRspamc\fR is a simple client for checking messages using rspamd or for learning rspamd by messages.
\&\fBRspamc\fR has several mandatory options for learning: \fIpassword\fR and \fIstatfile\fR.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-h\fR \fIhost[:port]\fR, \fB\-\-connect\fR \fIhost[:port]\fR" 4
.IX Item "-h host[:port], --connect host[:port]"
Specify host and port for connecting to rspamd server. Default host is \fIlocalhost\fR and
default port is \fI11333\fR for checking messages and \fI11334\fR for learning and statistic. 
Also it is possible to specify a unix socket for all operations (for example:
\&\fBrspamc\fR \fB\-h\fR /path/to/soket)
.IP "\fB\-b\fR \fIlocal_ip\fR, \fB\-\-bind\fR \fIlocal_ip\fR" 4
.IX Item "-b local_ip, --bind local_ip"
Specify explicit \s-1IP\s0 address to bind a client for operations.
.IP "\fB\-u\fR \fIuser\fR, \fB\-\-user\fR \fIuser\fR" 4
.IX Item "-u user, --user user"
Specify username for connection with rspamd server.
.IP "\fB\-F\fR \fIfrom_addr\fR, \fB\-\-from\fR \fIfrom_addr\fR" 4
.IX Item "-F from_addr, --from from_addr"
Specify \s-1SMTP\s0 \s-1FROM\s0 address for connection with rspamd server.
.IP "\fB\-r\fR \fIrcpt_addr\fR, \fB\-\-rcpt\fR \fIrcpt_addr\fR" 4
.IX Item "-r rcpt_addr, --rcpt rcpt_addr"
Specify \s-1SMTP\s0 \s-1RCPT\s0 \s-1TO\s0 address for connection with rspamd server.
.IP "\fB\-d\fR \fIdeliver_addr\fR, \fB\-\-deliver\fR \fIdeliver_addr\fR" 4
.IX Item "-d deliver_addr, --deliver deliver_addr"
Specify real delivery address for connection with rspamd server.
.IP "\fB\-p\fR, \fB\-\-pass\-all\fR" 4
.IX Item "-p, --pass-all"
Pass all filters when checking messages. Ignored in case of learning.
.IP "\fB\-v\fR, \fB\-\-verbose\fR" 4
.IX Item "-v, --verbose"
Be more verbose while displaying results. For example show descriptions of symbols.
.IP "\fB\-P\fR \fIpassword\fR, \fB\-\-password\fR \fIpassword\fR" 4
.IX Item "-P password, --password password"
Specify controller's password. Mandatory option for learning.
.IP "\fB\-c\fR \fIclassifier\fR, \fB\-\-classifier\fR \fIclassifier\fR" 4
.IX Item "-c classifier, --classifier classifier"
Specify classifier to learn message. Mandatory option for learning. Bayes classifier is used by default if this option is omitted.
.IP "\fB\-i\fR \fIip\fR, \fB\-\-ip\fR \fIip\fR" 4
.IX Item "-i ip, --ip ip"
Add \s-1IP\s0 header when scanning message. Useful for checking messages and emulating that client comes from 
specific \s-1IP\s0 address.
.IP "\fB\-w\fR \fIweight\fR, \fB\-\-weight\fR \fIweight\fR" 4
.IX Item "-w weight, --weight weight"
Weight of message for fuzzy operations.
.IP "\fB\-f\fR \fIflag\fR, \fB\-\-flag\fR \fIflag\fR" 4
.IX Item "-f flag, --flag flag"
Flag of list for fuzzy operations.
.IP "\fB\-t\fR \fItimeout\fR, \fB\-\-timeout\fR \fItimeout\fR" 4
.IX Item "-t timeout, --timeout timeout"
Timeout in seconds for all operations. Default value is 5 seconds.
.SH "RETURN VALUE"
.IX Header "RETURN VALUE"
On exit \fBrspamc\fR returns 0 if operation was successfull and error code otherwise.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
Check stdin:
.PP
.Vb 1
\&        rspamc < some_file
.Ve
.PP
Check files:
.PP
.Vb 1
\&        rspamc symbols file1 file2 file3
.Ve
.PP
Learn files:
.PP
.Vb 1
\&        rspamc \-P pass learn_spam file1 file2 file3
.Ve
.PP
Add fuzzy hash to set 2:
.PP
.Vb 1
\&        rspamc \-P pass \-f 2 \-w 10 fuzzy_add file1 file2
.Ve
.PP
Delete fuzzy hash from other server:
.PP
.Vb 1
\&        rspamc \-P pass \-h hostname:11334 \-f 2 fuzzy_del file1 file2
.Ve
.PP
Get statistics:
.PP
.Vb 1
\&        rspamc stat
.Ve
.PP
Get uptime:
.PP
.Vb 1
\&        rspamc uptime
.Ve
.PP
Add custom rule's weight:
.PP
.Vb 1
\&        rspamc add_symbol test 1.5
.Ve
.PP
Add custom action's weight:
.PP
.Vb 1
\&    rspamc add_action reject 7.1
.Ve
.SH "AUTHOR"
.IX Header "AUTHOR"
Vsevolod Stakhov <vsevolod@highsecure.ru>
.SH "COPYRIGHT AND LICENSE"
.IX Header "COPYRIGHT AND LICENSE"
Copyright 2011\-2012 by Vsevolod Stakhov <vsevolod@highsecure.ru>.
.PP
This program is free software; you may redistribute it and/or modify it
under the terms of \s-1BSD\s0 license.
